sequenceDiagram
    autonumber
    participant Browser
    participant Server

    Note over Browser, Server: Initial Load (Universal for all types)
    Browser->>Server: GET /notes (or /spa)
    Server-->>Browser: HTML, CSS, JS
    
    Browser->>Server: POST /new_note (Form Data)
    activate Server
    Note left of Server: Server saves note
    Server-->>Browser: 302 Redirect to /notes
    deactivate Server
    Browser->>Server: GET /notes (Full Reload)
    Server-->>Browser: HTML / CSS / JS / JSON Data

    Browser->>Server: GET /data.json
    activate Server
    Server-->>Browser: [{ "content": "hello", "date": "..." }]
    deactivate Server
    Note right of Browser: JS renders list dynamically

    Note right of Browser: JS adds note to local UI immediately
    Browser->>Server: POST /new_note_spa (JSON Body)
    activate Server
    Server-->>Browser: 201 Created (Confirmation only)
    deactivate Server
    Note right of Browser: No page reload or extra GET requests needed
